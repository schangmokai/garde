<!DOCTYPE html>
<html lang="en">

<% include ../partials/head %>

<body class="fix-header">
    <!-- ============================================================== -->
    <!-- Preloader -->
    <!-- ============================================================== -->
    <div class="preloader">
        <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
        </svg>
    </div>
    <!-- ============================================================== -->
    <!-- Wrapper -->
    <!-- ============================================================== -->
    <div id="wrapper">
        <!-- ============================================================== -->
        <!-- Topbar header - style you can find in pages.scss -->
        <!-- ============================================================== -->
        <nav class="navbar navbar-default navbar-static-top m-b-0">
            <div class="navbar-header">
                <div class="top-left-part">
                    <!-- Logo -->
                    <a class="logo" href="index.html">
                        <!-- Logo icon image, you can use font-icon also --><b>
                        <!--This is dark logo icon--><img src="http://localhost/nodefille/admin-lite/plugins/images/admin-logo.png" alt="home" class="dark-logo" /><!--This is light logo icon--><img src="http://localhost/nodefille/admin-lite/plugins/images/admin-logo-dark.png" alt="home" class="light-logo" />
                     </b>
                        <!-- Logo text image you can use text also --><span class="hidden-xs">
                        <!--This is dark logo text--><img src="http://localhost/nodefille/admin-lite/plugins/images/admin-text.png" alt="home" class="dark-logo" /><!--This is light logo text--><img src="http://localhost/nodefille/admin-lite/plugins/images/admin-text-dark.png" alt="home" class="light-logo" />
                     </span> </a>
                </div>
                <!-- /Logo -->
                <ul class="nav navbar-top-links navbar-right pull-right">
                    <li>
                        <form role="search" class="app-search hidden-sm hidden-xs m-r-10">
                            <input type="text" placeholder="Search..." class="form-control"> <a href=""><i class="fa fa-search"></i></a> </form>
                    </li>
                   <li>
                        <a class="profile-pic" href="/logout"> <img src="http://localhost/nodefille/admin-lite/plugins/images/users/varun.jpg" alt="user-img" width="36" class="img-circle"><b class="hidden-xs">logout</b></a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-header -->
            <!-- /.navbar-top-links -->
            <!-- /.navbar-static-side -->
        </nav>
        <!-- End Top Navigation -->
        <!-- ============================================================== -->
        <!-- Left Sidebar - style you can find in sidebar.scss  -->
        <!-- ============================================================== -->
        <div class="navbar-default sidebar" role="navigation">
             <% include ../partials/menugauche %>
        </div>
        <!-- ============================================================== -->
        <!-- End Left Sidebar -->
        <!-- ============================================================== -->
        <!-- ============================================================== -->
        <!-- Page Content -->
        <!-- ============================================================== -->
        <div id="page-wrapper">
            <div class="container-fluid">
                <div class="row bg-title">
                    <div class="col-lg-3 col-md-4 col-sm-4 col-xs-12">
                        <h3 class="page-title">LISTE DES UTILISATEURS</h3> 
                    </div>

                    <div class="col-lg-9 col-sm-8 col-md-8 col-xs-12">
                        <a data-title="edit" data-toggle="modal" data-target="#myModal" class="btn btn-primary pull-right m-l-20 hidden-xs hidden-sm waves-effect waves-light"><span class="glyphicon glyphicon-plus">  New users

                        </a>
                        <ol class="breadcrumb">
                            <li><a href="/utilisateurs/listes">Dashboard</a></li>
                            <li class="active">Basic Table</li>
                        </ol>
                    </div>
                    <!-- /.col-lg-12 -->
                </div>
                <!-- /row -->

                           <!-- Modal -->
             <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">Créer un utilisateur</h4>
                      </div>
                      <div class="modal-body">
                           <form  action="/utilisateurs/ajouter/" method="post" enctype="multipart/form-data" role="form">
                               <div class="well">
                                    <center><img src="http://localhost/nodefille/image/leblanc.jpg"></center>
                               </div>
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault01">addres de l'utilisateur</label>
                                  <input type="text" class="form-control" name="addres" placeholder="Addres de l'utilisateur" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault02">Cni_ date de l'utilisateur</label>
                                  <input type="text" class="form-control" name="cni_date" placeholder="nom de l'utilisateur" required>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault03">Cni_expire de l'utilisateur</label>
                                  <input type="text" class="form-control" name="cni_expire" placeholder="Cni_expire de l'utilisateur" required>
                                </div>
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault06">cni_no</label>
                                  <input type="text" class="form-control" name="cni_no" placeholder="cni_no de l'utilisateur" required>
                                </div>
                              </div>
                              
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault05">N° Téléphone 1</label>
                                  <input type="text" class="form-control" name="tel" placeholder="N° Téléphone 1" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault06">N° Téléphone 2</label>
                                  <input type="text" class="form-control" name="tel2" placeholder="N° Téléphone 2" required>
                                </div>
                              </div>

                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">Cni_place</label>
                                  <input type="text" class="form-control" name="cni_place" placeholder="Cni_place"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Cni_scan</label>
                                  <input type="text" class="form-control" name="cni_scan" placeholder="password de l'utilisateur" required>
                                </div>
                              </div>

                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">login</label>
                                  <input type="text" class="form-control" name="login" placeholder="Login"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Password</label>
                                  <input type="password" class="form-control" name="password" placeholder="password de l'utilisateur" required>
                                </div>
                              </div>
                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">Nom</label>
                                  <input type="text" class="form-control" name="nom" placeholder="Nom"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Prenom</label>
                                  <input type="text" class="form-control" name="prenom" placeholder="prenom de l'utilisateur" required>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">email</label>
                                  <input type="text" class="form-control" name="email" placeholder="email de l'utilisateur" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                   <label for="validationDefault07">Groupe</label>
                                   <select class="form-control" name="id_groupe" >     
                                      <% groupelist.forEach(function(todo, index) { %>
                                              <option value="<%= todo.id %>"><%= todo.description %></option>
                                      <% }); %>
                                  </select>
                                </div>
                              </div>
                              <br>

                              <div class="modal-footer">
                                   <button class="btn btn-primary btn-lg" type="submit" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign">  Enregistrer</span></button>
                              </div>
                            </form>
                      </div>
                    </div>
                  </div>
                </div>


                <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                  <div class="modal-dialog">
                    <div class="modal-content">
                      <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="myModalLabel">Modifier un users</h4>
                      </div>
                      <div class="modal-body">
                           <div class="well">
                                <center><img src="http://localhost/nodefille/image/leblanc.jpg"></center>
                           </div>
                           <form  action="/utilisateurs/update/" method="post" enctype="multipart/form-data" role="form">
                               
                             <input type="hidden" id="id2" name="id">
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault01">addres de l'utilisateur</label>
                                  <input type="text" class="form-control" name="addres" id="addres" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault02">Cni_ date de l'utilisateur</label>
                                  <input type="text" class="form-control" name="cni_date" id="cni_date" required>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault03">Cni_expire de l'utilisateur</label>
                                  <input type="text" class="form-control" name="cni_expire" id="cni_expire" required>
                                </div>
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault06">cni_no</label>
                                  <input type="text" class="form-control" name="cni_no" id="cni_no" required>
                                </div>
                              </div>
                              
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault05">N° Téléphone 1</label>
                                  <input type="text" class="form-control" name="tel" id="tel" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault06">N° Téléphone 2</label>
                                  <input type="text" class="form-control" name="tel2" id="tel2" required>
                                </div>
                              </div>

                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">Cni_place</label>
                                  <input type="text" class="form-control" name="cni_place" id="cni_place"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Cni_scan</label>
                                  <input type="text" class="form-control" name="cni_scan" id="cni_scan" required>
                                </div>
                              </div>

                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">login</label>
                                  <input type="text" class="form-control" name="login" id="login"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Password</label>
                                  <input type="password" class="form-control" name="password" id="password" required>
                                </div>
                              </div>
                              <div class="row">
                               
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault08">Nom</label>
                                  <input type="text" class="form-control" name="nom" id="nom"  required>
                                </div>

                                 <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">Prenom</label>
                                  <input type="text" class="form-control" name="prenom" id="prenom" required>
                                </div>
                              </div>
                              <div class="row">
                                <div class="col-md-6 mb-3">
                                  <label for="validationDefault04">email</label>
                                  <input type="text" class="form-control" name="email" id="email" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                   <label for="validationDefault07">Groupe</label>
                                   <select class="form-control" name="id_groupe" >     
                                      <% groupelist.forEach(function(todo, index) { %>
                                              <option value="<%= todo.id %>"><%= todo.description %></option>
                                      <% }); %>
                                  </select>
                                </div>
                              </div>
                              <br>
                              <div class="modal-footer">
                                   <button class="btn btn-primary btn-lg" type="submit" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign">  Update</span></button>
                              </div>
                            </form>
                      </div>
                    </div>
                  </div>
                </div>


                <!-- delete pour la supression d'un users -->


             <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                      <div class="modal-dialog">
                    <div class="modal-content">
                          <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                        <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
                      </div>

                          <div class="modal-body">
                           <form method="POST" action="/utilisateurs/supprimer/">
                                      <input type="hidden" name="id"  id="ids">
                                      <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this Record?</div>
                                      <div class="well">
                                            <center><img src="http://localhost/nodefille/image/leblanc.jpg"></center>
                                      </div>
                                       <div class="modal-footer">
                                                                   
                                          <button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-ok-sign"></span> Yes</button>

                                          <button type="button" class="btn btn-default" data-dismiss="modal"><span class="glyphicon glyphicon-remove"></span> No</button>

                                       </div> 
                                                    
                                </div>
                          </form> 
                        </div>
                    <!-- /.modal-content --> 
                  </div>
                      <!-- /.modal-dialog --> 
                </div>






                <div class="row">
                    <div class="col-sm-12">
                        <div class="white-box">
                        
                        <table id="example2" class="table table-striped table-bordered well" cellspacing="0" width="100%">

                                    <thead>
                                        <tr>
                                          <th>#</th>
                                          <th>addres</th>
                                          <th>cni_date</th>
                                          <th>cni_expire</th>
                                          <th>cni_no</th>
                                          <th>cni_place</th>
                                          <th>cni_scan</th>
                                          <th>email</th>
                                          <th>login</th>
                                          <th>nom</th>
                                          <th>password</th>
                                          <th>prenom</th>
                                          <th>Tel1</th>
                                          <th>Tel2</th>
                                         <!--<th>Add</th>-->
                                          <th>Edit</th>
                                          <th>delete</th>
                                        </tr>
                                    </thead>
                                    <tfoot>

                                        <tr>
                                          <th>#</th>
                                          <th>addres</th>
                                          <th>cni_date</th>
                                          <th>cni_expire</th>
                                          <th>cni_no</th>
                                          <th>cni_place</th>
                                          <th>cni_scan</th>
                                          <th>email</th>
                                          <th>login</th>
                                          <th>nom</th>
                                          <th>password</th>
                                          <th>prenom</th>
                                          <th>Tel1</th>
                                          <th>Tel2</th>
                                          <!--<th>Add</th>-->
                                          <th>Edit</th>
                                          <th>delete</th>
                                        </tr>
                                    </tfoot>
                                  <tbody>
                                    



                                    <% todolist.forEach(function(todo, index) { %>
                                         <tr class="users">
                                             <th scope="row"><%= index %></th>
                                                <td class="addres"><%= todo.addres %></td>
                                              <input id="id" type="hidden" value="<%= todo.id %>">
                                              <td class="cni_date"><%= todo.cni_date %></td>
                                              <td class="cni_expire"><%= todo.cni_expire %></td>
                                              <td class="cni_no"><%= todo.cni_no %></td>
                                              <td class="cni_place"><%= todo.cni_place %></td>
                                              <td class="cni_scan"><%= todo.cni_scan %></td>
                                              <td class="email"><%= todo.email %></td>
                                              <td class="login"><%= todo.login %></td>
                                              <td class="nom"><%= todo.nom %></td>
                                              <td class="password"><%= todo.password %></td>
                                              <td class="prenom"><%= todo.prenom %></td>
                                              <td class="tel"><%= todo.tel %></td>
                                              <td class="tel2"><%= todo.tel2 %></td>
                                            
                                              <!--<td><a data-toggle="modal" data-target="#myModal"><span class="glyphicon glyphicon-plus"></span></a></td>-->

                                              <!--<td><button class="btn btn-primary btn-xs btnEditusers" data-title="edit" data-toggle="modal" data-target="#myModal" ><span class="glyphicon glyphicon-plus"></span></button></td>-->

                                             <!-- <td><a data-toggle="modal" data-target="#edit"><span class="glyphicon glyphicon-pencil"></span></a></td> -->

                                             <td><button class="btn btn-primary btn-xs btnEditusers" data-title="edit" data-toggle="modal" data-target="#edit" ><span class="glyphicon glyphicon-pencil"></span></button></td>

                                              <!--<td><a href="/todo/supprimer/<%= todo.id %>"><span class="glyphicon glyphicon-trash"></span></p> </a></td> -->

                                              <!--<td><a data-toggle="modal" data-target="#delete"><span class="glyphicon glyphicon-trash"></span></p> </a></td>-->
                                            <td> <button class="btn btn-danger btn-xs btnmodifierusers" data-title="Delete" data-toggle="modal" data-target="#delete" ><span class="glyphicon glyphicon-trash"></span></button> </td>
                                        </tr>
                                    <% }); %>


                                   
                                  </tbody>
                            </table>


                        </div>
                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- /.container-fluid -->
            <footer class="footer text-center"> 2017 &copy; Ample Admin brought to you by wrappixel.com</footer>
        </div>
        <!-- /#page-wrapper -->
    </div>
    <!-- /#wrapper -->
    <!-- jQuery -->
    <script src="//code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
    <!-- [/] jquery -->
    <!-- bootstrap -->
    
    <script src="http://localhost/nodefille/js/bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap.min.js"></script>
   

    <!-- [/] bootstrap -->


  <script type="text/javascript">
   
    $(document).ready(function() {
      $('#example2').DataTable();
    } );
       
        $(function () {
            $(".users").each(function () {
              var $users = $(this);

              $users.find('.btnEditusers').click(function(){

                  // alert($user.find(".nom").text());
                  // alert($user.find(".prenom").text());
                  
                  //pour toute  balise qui a pour id nom, dans son attribut value on doit mettre le texte du petit de user qui a pour classe nom
                  $("#addres").val($users.find(".addres").text())
                  $("#cni_date").val($users.find(".cni_date").text())
                  $("#cni_expire").val($users.find(".cni_expire").text())
                  $("#cni_no").val($users.find(".cni_no").text())
                  $("#cni_place").val($users.find(".cni_place").text())
                  $("#cni_scan").val($users.find(".cni_scan").text())
                  $("#email").val($users.find(".email").text())
                  $("#login").val($users.find(".login").text())
                  $("#nom").val($users.find(".nom").text())
                  $("#password").val($users.find(".password").text())
                  $("#prenom").val($users.find("#prenom").val())
                  $("#tel").val($users.find("#tel").val())
                  $("#tel2").val($users.find("#tel2").val())

              });
            });
        });
        
        $(function () {
          $(".users").each(function () {
              var $users = $(this);
              $users.find('.btnmodifierusers').click(function(){
                  $("#ids").val($users.find("#id").val())
              });
            });
          });
    </script>
    
    <script src="http://localhost/nodefille/admin-lite/plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.js"></script>
    <!--slimscroll JavaScript -->
    <script src="http://localhost/nodefille/admin-lite/html/js/jquery.slimscroll.js"></script>
    <!--Wave Effects -->
    <script src="http://localhost/nodefille/admin-lite/html/js/waves.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="http://localhost/nodefille/admin-lite/html/js/custom.min.js"></script>
</body>

</html>
